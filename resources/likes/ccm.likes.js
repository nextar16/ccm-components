ccm.component({name:"likes",config:{store:[ccm.store,{url:"ws://ccm2.inf.h-brs.de/index.js",store:"mk_likes_1_0_0"}],user:[ccm.instance,"https://kaul.inf.h-brs.de/ccm/components/user2.js"]},Instance:function(){var e=this;e.init=function(n){e.store.onChange=function(){e.render()},n()},e.render=function(n){var t=ccm.helper.element(e),s=t.parent().attr("id");e.store.get(s,function(i){function r(s){t.html(""),rawLikes=null===s.likes.length?0:s.likes.length,likes="<span>"+rawLikes+"</span>",btn=$("<input />",{type:"button",value:"I Love It!",on:{click:function(){return e.user.login(function(){(index=s.likes.indexOf(e.user.data().key))>-1?(s.likes.splice(index,1),console.log(s.likes,index),e.store.set(s,function(){e.render()})):s.likes.push(e.user.data().key),e.store.set(s,function(){e.render()})}),!1}}}),e.user.isLoggedIn()&&s.likes.indexOf(e.user.data().key)>-1&&btn.attr("value","I Don't Love"),t.append(likes),t.append(btn),n&&n()}null===i?e.store.set({key:s,likes:[]},r):r(i)})}}});